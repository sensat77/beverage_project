# 饮料业务数据管理小程序

一个为饮料行业业务员量身打造的个人业绩管理工具。通过智能文本解析，将日常的订单文本快速转化为结构化数据，实现销售、提成、费用的自动化统计与分析。

## ✨ 项目目标

旨在解决业务员手动记录和计算订单数据的痛点，提供一个高效、准确、便捷的移动端解决方案，核心是实现：

- **智能识别**：自动从非结构化的订单文本中解析出客户、产品、数量、价格及各项费用。
- **数据统计**：自动计算每笔订单的销售额、搭赠成本、提成及预估净收入。
- **业绩展示**：提供日度、月度报表，让个人业绩一目了然。

## 🚀 技术栈

本项目采用前后端分离架构：

- **小程序端 (Frontend)**
  - **框架**: 微信小程序原生框架
  - **语言**: JavaScript
- **服务器端 (Backend)**
  - **语言**: Python 3.9+
  - **框架**: Flask (一个轻量、灵活的Web框架)
  - **数据库**: MySQL 8.0
  - **ORM**: SQLAlchemy (用于Python代码操作数据库)
  - **核心依赖**: PyJWT (用户认证), bcrypt (密码加密), gunicorn (生产环境服务器) 等。
- **部署 (Deployment)**
  - **方案**: 微信云托管 (容器化部署)
  - **持续集成**: Docker

## 🌟 核心功能

- **用户系统**: 支持多用户注册、登录、修改密码，通过JWT进行安全的身份认证。
- **智能订单解析**:
  - 兼容多种订单格式（单行单品、单行多品）。
  - 支持别名和常见错别字自动纠正。
  - 智能区分费用行与产品行。
  - 自动合并订单中的重复产品项。
- **订单管理**:
  - 支持手动添加/删除/修改解析后的产品项。
  - 支持订单的最终确认与保存。
  - 支持按日期查看历史订单列表及删除订单。
- **数据报表**:
  - **首页仪表盘**: 展示当日关键业绩指标，支持按日期查询。
  - **月度报表**: 提供月度汇总数据，并可“钻取”查看每日的业绩概要。
- **辅助功能**:
  - 内置“关于与帮助”说明文档。
  - 支持记住账号密码，提升登录体验。

## 快速开始（本地开发）

#### 1. 后端 (`/backend`)

- 确保已安装 Python 3.9+ 和 Conda。
- 创建并激活Conda环境: `conda create -n beverage_app python=3.9 && conda activate beverage_app`
- 安装依赖: `pip install -r requirements.txt`
- 在 `backend` 目录下创建 `.env` 文件，并配置好数据库连接字符串和JWT密钥。
- 初始化数据库: `flask db upgrade`
- 启动服务: `flask run --host=0.0.0.0`

#### 2. 前端 (`/frontend`)

- 使用微信开发者工具导入 `frontend` 文件夹。
- 在 `utils/api.js` 文件中，将 `BASE_URL` 修改为您的本地后端地址 (例如 `http://192.168.x.x:5000`)。
- 在开发者工具的“详情” -> “本地设置”中，勾选“不校验合法域名...”。
- 编译运行。

## 目录结构

```
beverage_project/
├── backend/            # 后端Flask应用
│   ├── app/            # 应用核心代码
│   │   ├── models/     # 数据库模型
│   │   ├── routes/     # API路由定义
│   │   ├── services/   # 核心业务逻辑（如文本解析）
│   │   └── __init__.py # 应用工厂
│   ├── config.py       # 配置文件
│   ├── Dockerfile      # 部署用的容器蓝图
│   └── requirements.txt# Python依赖列表
└── frontend/           # 微信小程序
    ├── pages/          # 页面
    ├── utils/          # 工具函数 (如api.js)
    └── app.json        # 小程序全局配置
 ├── migrations/     # 数据库迁移脚本
│   ├── .env            # 环境变量 (本地)
│  
```

*该项目由您和一位乐于助人的人工智能共同协作完成。*